# DozerAI & App Suite Issues Log

This log tracks non-critical issues, bugs, suggestions, and areas for improvement identified during the development or testing of DozerAI and the Dozer Employee App Suite.

**Format:** `[YYYY-MM-DD HH:MM:SS] - Issue Identified/Updated/Resolved (DozerAI/App): [Description] - Task: [Guide Day X Task Name] - Status: [New/Investigating/Blocked/Resolved] - Fix: [Brief Fix Summary, if Resolved]`

---
*(Log entries start here)*
[2025-05-26 00:15:00] - Issue Identified/Updated/Resolved (DozerAI/App): Challenges in getting the `00_initialize_supabase_schema.py` script to run successfully due to a combination of environment configuration, dependency installation, database connection, and complex SQL DDL syntax for PostgreSQL. - Task: Day 1 - Kennel Foundation: Supabase Connection, Automated Schema Execution Script, Env Config & Gitignore - Status: Resolved - Fix: Iterative debugging and script refinement, including adjustments to `.env` handling, direct installation of `psycopg2-binary`, path corrections, and significant DDL refactoring (two-part execution with commits) to handle PostgreSQL's parsing of functions and triggers within batched statements. The final script version successfully created the entire schema.
[2025-05-26 00:15:00] - Issue Identified/Updated/Resolved (DozerAI/App): `git commit` command failing to execute correctly via `run_terminal_cmd` tool. Multiple attempts with different message formats and even without `-m` flag resulted in exit code 1 or garbled/interrupted output, preventing automated commit. - Task: Day 1 Auto-Update Workflow (Git Commit Step) - Status: Resolved - Fix: Discovered a previous commit had partially succeeded. Used `git commit --amend --no-edit` to include all staged changes, followed by a successful `git push origin main`.
[2025-05-26 14:08:05] - Issue Identified/Updated/Resolved (DozerAI/App): User reported a past incident (pre-dating 'Critical Safeguards Protocol') where a `git clean` operation, perceived to be run by DozerAI_Builder, allegedly resulted in the loss of `.env` and other uncommitted files. This caused significant project delay and user frustration. DozerAI_Builder's operational logs do not confirm autonomous execution of `git clean`; current safeguards prevent this. The incident is logged to acknowledge user experience and reinforce the importance of `.gitignore` and manual backups of critical untracked files. - Task: General Project Setup (Pre-Day 1 / Day 1 Context) - Status: Documented (Past Incident) / Resolved (Current Safeguards in Place) - Fix: Current `DozerAI_Rules_V1.md` includes strict `Critical Safeguards & Destructive Operations Protocol` preventing unauthorized `git clean` or `git reset --hard`.
[2025-05-26 14:08:05] - Issue Identified/Updated/Resolved (DozerAI/App): Multiple errors encountered during Day 1 Supabase schema initialization (`00_initialize_supabase_schema.py`):
    1. Initial DB connection failures (due to `.env` parsing, hostname resolution, pooler variable mismatches).
    2. Python dependency issues (`psycopg2-binary` import).
    3. SQL syntax errors in DDL (trigger creation, `drop_rls_policy_if_exists` function logic).
    4. "Policy already exists" errors when re-running script.
- Task: Day 1 - Kennel Foundation - Status: Resolved - Fix: Corrected `.env` variable names in script and instructed user on `.env` content; switched to `psycopg2-binary`; refactored SQL DDL into two parts with intermediate commit; corrected `drop_rls_policy_if_exists` logic; added comprehensive `drop_rls_policy_if_exists` calls for all RLS policies to ensure script idempotency. Schema script now runs cleanly.
[2025-05-27 01:00:00] - Issue Identified/Updated/Resolved (DozerAI/App): Multiple issues with ingestion script `01_ingest_and_contextualize_docs.py` including Supabase schema mismatches (PK name, missing columns `full_text_content`, `chunk_sequence`, `chunk_order`), incorrect Gemini model string, `langfuse` pip version, `.env` var names, Gemini API `FinishReason`/safety/empty response parsing, low `max_output_tokens`. Also, `venv` disappeared. `chunk_order` column confusion. - Task: Day 2 - Kennel Ingestion MVP - Status: Resolved - Fix: Iterative script debugging, `venv` recreation, schema adjustments in Supabase (delete `chunk_order`, add `document_title`), script adaptation for `.env` and API responses.